<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>S01_E09_多选按钮 (CheckBox)</title>
</head><body><a href="nbk:///5050a3b0-1a7e-4301-bd1a-73dd5527880d">S01_E09_多选按钮 (CheckBox)<br/>
</a><br/>
class OnBoxClickListener implements OnClickListener{}<br/>
class CheckBoxListener implements OnCheckedChangeListener{}<br/>
<br/>
package com.rockyniu.s01_e09_checkbox;<br/>
<br/>
import android.app.Activity;<br/>
import android.os.Bundle;<br/>
import android.view.Menu;<br/>
import android.view.View;<br/>
import android.view.View.OnClickListener;<br/>
import android.widget.CheckBox;<br/>
import android.widget.CompoundButton;<br/>
import android.widget.CompoundButton.OnCheckedChangeListener;<br/>
<br/>
public class MainActivity extends Activity {<br/>
&#09;private CheckBox eatBox;<br/>
&#09;private CheckBox sleepBox;<br/>
&#09;private CheckBox dotaBox;<br/>
&#09;private CheckBox allCheckBox;<br/>
&#09;<br/>
&#09;@Override<br/>
&#09;protected void onCreate(Bundle savedInstanceState) {<br/>
&#09;&#09;super.onCreate(savedInstanceState);<br/>
&#09;&#09;setContentView(R.layout.activity_main);<br/>
&#09;&#09;<br/>
&#09;&#09;eatBox = (CheckBox)findViewById(R.id.eatId);<br/>
&#09;&#09;sleepBox = (CheckBox)findViewById(R.id.sleepId);<br/>
&#09;&#09;dotaBox = (CheckBox)findViewById(R.id.dotaId);<br/>
&#09;&#09;allCheckBox = (CheckBox)findViewById(R.id.allCheckId);<br/>
&#09;&#09;<br/>
&#09;&#09;OnBoxClickListener listener = new OnBoxClickListener();<br/>
&#09;&#09;eatBox.setOnClickListener(listener);<br/>
&#09;&#09;sleepBox.setOnClickListener(listener);<br/>
&#09;&#09;dotaBox.setOnClickListener(listener);<br/>
&#09;&#09;allCheckBox.setOnClickListener(listener);<br/>
&#09;&#09;<br/>
&#09;&#09;CheckBoxListener clickListener = new CheckBoxListener();<br/>
&#09;&#09;eatBox.setOnCheckedChangeListener(clickListener);<br/>
&#09;&#09;sleepBox.setOnCheckedChangeListener(clickListener);<br/>
&#09;&#09;dotaBox.setOnCheckedChangeListener(clickListener);<br/>
&#09;&#09;allCheckBox.setOnCheckedChangeListener(clickListener);<br/>
&#09;}<br/>
&#09;<br/>
&#09;class CheckBoxListener implements OnCheckedChangeListener{<br/>
<br/>
&#09;&#09;@Override<br/>
&#09;&#09;public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {<br/>
&#09;&#09;&#09;if (buttonView.getId() == R.id.eatId){<br/>
&#09;&#09;&#09;&#09;System.out.println("eatBox");<br/>
&#09;&#09;&#09;}<br/>
&#09;&#09;&#09;else if (buttonView.getId() == R.id.sleepId){<br/>
&#09;&#09;&#09;&#09;System.out.println("sleepBox");<br/>
&#09;&#09;&#09;}<br/>
&#09;&#09;&#09;else if (buttonView.getId() == R.id.dotaId){<br/>
&#09;&#09;&#09;&#09;System.out.println("dotaBox");<br/>
&#09;&#09;&#09;}&#09;&#09;&#09;<br/>
&#09;&#09;&#09;<br/>
&#09;&#09;&#09;if(isChecked){<br/>
&#09;&#09;&#09;&#09;System.out.println("Checked");<br/>
&#09;&#09;&#09;}<br/>
&#09;&#09;&#09;else {<br/>
&#09;&#09;&#09;&#09;System.out.println("Unchecked");<br/>
&#09;&#09;&#09;}<br/>
&#09;&#09;}<br/>
&#09;&#09;<br/>
&#09;}<br/>
&#09;class OnBoxClickListener implements OnClickListener{<br/>
<br/>
&#09;&#09;@Override<br/>
&#09;&#09;public void onClick(View view) {<br/>
&#09;&#09;&#09;CheckBox box = (CheckBox) view;<br/>
&#09;&#09;&#09;if (box.getId() == R.id.allCheckId) {<br/>
&#09;&#09;&#09;&#09;System.out.println("allCheckBox is clicked");<br/>
&#09;&#09;&#09;&#09;boolean isChecked = box.isChecked();<br/>
&#09;&#09;&#09;&#09;eatBox.setChecked(isChecked);<br/>
&#09;&#09;&#09;&#09;sleepBox.setChecked(isChecked);<br/>
&#09;&#09;&#09;&#09;dotaBox.setChecked(isChecked);<br/>
&#09;&#09;&#09;}<br/>
&#09;&#09;&#09;else if (eatBox.isChecked() &amp;&amp; sleepBox.isChecked() &amp;&amp; dotaBox.isChecked()){<br/>
&#09;&#09;&#09;&#09;allCheckBox.setChecked(true);<br/>
&#09;&#09;&#09;}<br/>
&#09;&#09;&#09;if (!box.isChecked()){<br/>
&#09;&#09;&#09;&#09;allCheckBox.setChecked(false);<br/>
&#09;&#09;&#09;}<br/>
&#09;&#09;}<br/>
&#09;&#09;<br/>
&#09;}<br/>
<br/>
&#09;@Override<br/>
&#09;public boolean onCreateOptionsMenu(Menu menu) {<br/>
&#09;&#09;// Inflate the menu; this adds items to the action bar if it is present.<br/>
&#09;&#09;getMenuInflater().inflate(R.menu.main, menu);<br/>
&#09;&#09;return true;<br/>
&#09;}<br/>
<br/>
}<br/>
</body></html>